function sucomInitAdminMedia(e,a){var i="table.sucom-settings";void 0!==e&&e&&(i=e+" "+i),jQuery(document).on("click",i+" .sucom_image_upload_button",function(e){sucomHandleImageUpload(this,e)})}function sucomHandleImageUpload(e,a){var i=jQuery(e).attr("data-pid"),t=jQuery(e).attr("id").replace(/^button_(.*)$/,"$1"),m="";t.match(/^.*_[0-9]+$/)&&(m=t.replace(/^(.*)(_[0-9]+)$/,"$2"),t=t.replace(/^(.*)(_[0-9]+)$/,"$1")),a.preventDefault(),"undefined"!=typeof sucom_image_upload_media&&sucom_image_upload_media.close(),sucom_image_upload_media=wp.media({title:sucomAdminMediaL10n._select_image,button:{text:sucomAdminMediaL10n._select_image},multiple:!1,library:{type:"image"}}),sucom_image_upload_media.on("open",function(){if(jQuery.isNumeric(i)&&i){var a=sucom_image_upload_media.state().get("selection"),t=wp.media.attachment(i);a.add(t?[t]:[])}jQuery(".media-modal",e.el).find("#media-search-input").focus()}),sucom_image_upload_media.on("select",function(){var e=sucom_image_upload_media.state().get("selection").first().toJSON();jQuery("#text_"+t+"_id"+m).val(e.id).change(),jQuery("#select_"+t+"_id_pre"+m).val("wp").change(),jQuery("#text_"+t+"_url"+m).val("").change(),jQuery("#text_"+t+"_url"+m).prop("disabled","disabled")}),sucom_image_upload_media.open()}jQuery(document).bind("sucom_init_metabox",function(e,a,i){sucomInitAdminMedia(a,i)});